import{u as V,S as k,r as y,a as c,o as S,c as T,b as o,d as m,w as u,e as p,v as f,t as g}from"./index-29c451c3.js";import{T as b}from"./toast-a65cc0ad.js";const B={class:"flex justify-content-center align-items-center h-screen"},I={class:"flex flex-column gap-4 align-items-center"},K=o("div",{class:"font-bold text-2xl text-main-color"}," Đăng nhập vào hệ thống ",-1),U={class:"card w-23rem flex flex-column gap-3 py-4"},A={class:"flex flex-column gap-2"},C=o("span",null,"Tài khoản",-1),P={class:"flex flex-column gap-1"},R={class:"flex flex-column gap-2"},D=o("span",null,"Mật khẩu",-1),E={class:"flex flex-column gap-1"},H={__name:"Login",setup(M){const w=b(),_=V(),{onActionLogin:h}=k(),e=y({formLogin:{userName:"",password:""},validate:{userName:"",password:""}}),l=()=>{e.formLogin.userName?e.validate.userName="":e.validate.userName="Vui lòng nhập tên tài khoản"},r=()=>{e.formLogin.password?e.validate.password="":e.validate.password="Vui lòng nhập mật khẩu"},v=s=>{r(),e.formLogin.password=s.target.value},x=()=>{l(),r()},L=()=>{for(const s in e.validate)if(e.validate[s])return!0;return!1},i=async()=>{var a;if(x(),L())return;const s=await h();s.some(({user_name:n,password:t})=>n===e.formLogin.userName&&t===e.formLogin.password)?(_.push({name:"Home"}),localStorage.setItem("token",(a=s.find(({user_name:n,password:t})=>n===e.formLogin.userName&&t===e.formLogin.password))==null?void 0:a.full_name)):w.error("Sai tài khoản hoặc mật khẩu!")};return(s,a)=>{const n=c("InputText"),t=c("Password"),N=c("Button");return S(),T("div",B,[o("div",I,[K,o("div",U,[o("label",A,[C,o("div",P,[m(n,{modelValue:e.formLogin.userName,"onUpdate:modelValue":a[0]||(a[0]=d=>e.formLogin.userName=d),class:"w-full",onBlur:l,onInput:l,onKeydown:u(i,["enter"])},null,8,["modelValue","onKeydown"]),p(o("small",{class:"p-error ml-1"},g(e.validate.userName),513),[[f,e.validate.userName]])])]),o("label",R,[D,o("div",E,[m(t,{class:"w-full",feedback:!1,toggleMask:"",inputClass:"w-full",autocomplete:"new-password",onInput:v,onBlur:r,modelValue:e.formLogin.password,"onUpdate:modelValue":a[1]||(a[1]=d=>e.formLogin.password=d),onKeydown:u(i,["enter"])},null,8,["modelValue","onKeydown"]),p(o("small",{class:"p-error ml-1"},g(e.validate.password),513),[[f,e.validate.password]])])]),m(N,{label:"Đăng nhập",onClick:i})])])])}}};export{H as default};
