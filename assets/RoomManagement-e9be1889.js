import{S as B,r as C,h as G,i as K,a as u,o as L,c as $,d as t,j as m,b as n,k as v,F as O,e as g,v as R,t as p,w as E}from"./index-3538aa82.js";import{f as q}from"./index-2c23f115.js";import{T as F}from"./toast-7685baea.js";const M={class:"flex flex-column gap-3"},X={class:"flex flex-column gap-2"},P=n("span",null,"Tên phòng:",-1),Q={class:"flex flex-column gap-2"},H=n("span",null,"Ảnh phòng:",-1),J={class:"flex flex-column gap-2"},W=n("span",null,"Giá phòng:",-1),Y={class:"flex flex-column gap-1"},Z={class:"flex flex-column gap-2"},oo=n("span",null,"Kích thước phòng (m2):",-1),eo={class:"flex flex-column gap-1"},lo={class:"flex flex-column gap-2"},no=n("span",null,"Số lượng phòng:",-1),so={class:"flex flex-column gap-1"},to={class:"flex flex-column gap-2"},ao=n("span",null,"Tiện ích:",-1),io={class:"flex flex-column gap-2"},mo=n("span",null,"Trạng thái:",-1),ro={class:"flex flex-column gap-3"},uo=n("span",{class:"font-bold text-2xl"},"Quản lý phòng trọ",-1),po={class:"flex justify-content-between"},co={class:"flex gap-2"},fo={class:"p-input-icon-right"},ho=["src"],go={class:"fixed-text"},Ro=n("div",{class:"flex justify-content-center"}," Không tìm thấy kết quả nào ",-1),Co={__name:"RoomManagement",setup(_o){const _=F(),{onActionAddInfoRoom:V,onActionUpdateInfoRoom:I,onActionGetRooms:w,onActionGetDetailRoom:y,onActionRemoveRoom:T,onGetterRooms:f,onGetterDetailRoom:D}=B(),l=C({formInfoRoom:{name:"",image:"",price:null,size:null,amountRoom:null,utilities:"",status:"Chưa cho thuê"},selectedRoom:[],display:!1,popupDetail:{title:"Thêm phòng trọ"}}),c=G(""),a=C({price:null,size:null,amountRoom:null}),x=s=>{var o;l.display=!0,s==="create"?(l.popupDetail.title="Thêm phòng trọ",l.formInfoRoom={name:"",image:"",price:null,size:null,amountRoom:null,utilities:"",status:"Chưa cho thuê"}):(l.popupDetail.title="Cập nhật thông tin phòng",y((o=s==null?void 0:s.data)==null?void 0:o.id))},h=s=>{isNaN(l.formInfoRoom[s])?a[s]="Trường này bắt buộc là số":a[s]=null},k=()=>{let s=!1;return Object.keys(a).forEach(o=>{a[o]&&(s=!0)}),s},S=async()=>{k()||(l.popupDetail.title==="Thêm phòng trọ"?await V(l.formInfoRoom):await I(l.formInfoRoom),_.success("Lưu dữ liệu phòng thành công!"),l.display=!1,w())},U=async()=>{for(const s of l.selectedRoom)await T(s.id);_.success("Xóa phòng thành công!"),w()},z=()=>{let s=!1;return Object.keys(l.formInfoRoom).forEach(o=>{l.formInfoRoom[o]||(s=!0)}),s},b=()=>{c.value&&(f.value=f.value.filter(s=>(s==null?void 0:s.name.toLowerCase())===c.value.toLowerCase()))};return K(D,s=>{l.formInfoRoom=s}),(s,o)=>{const r=u("InputText"),A=u("Dropdown"),d=u("Button"),N=u("Dialog"),i=u("Column"),j=u("DataTable");return L(),$(O,null,[t(N,{visible:l.display,"onUpdate:visible":o[11]||(o[11]=e=>l.display=e),modal:"",header:l.popupDetail.title,class:"w-30rem"},{footer:m(()=>[t(d,{label:"Bỏ qua",onClick:o[10]||(o[10]=e=>l.display=!1),class:"p-button-outlined"}),t(d,{label:"Lưu",onClick:S,disabled:z(),autofocus:""},null,8,["disabled"])]),default:m(()=>[n("div",M,[n("label",X,[P,t(r,{modelValue:l.formInfoRoom.name,"onUpdate:modelValue":o[0]||(o[0]=e=>l.formInfoRoom.name=e)},null,8,["modelValue"])]),n("label",Q,[H,t(r,{modelValue:l.formInfoRoom.image,"onUpdate:modelValue":o[1]||(o[1]=e=>l.formInfoRoom.image=e)},null,8,["modelValue"])]),n("label",J,[W,n("div",Y,[t(r,{modelValue:l.formInfoRoom.price,"onUpdate:modelValue":o[2]||(o[2]=e=>l.formInfoRoom.price=e),onChange:o[3]||(o[3]=e=>h("price"))},null,8,["modelValue"]),g(n("small",{class:"p-error text-custom-mini"},p(a.price),513),[[R,a.price]])])]),n("label",Z,[oo,n("div",eo,[t(r,{modelValue:l.formInfoRoom.size,"onUpdate:modelValue":o[4]||(o[4]=e=>l.formInfoRoom.size=e),onChange:o[5]||(o[5]=e=>h("size"))},null,8,["modelValue"]),g(n("small",{class:"p-error text-custom-mini"},p(a.size),513),[[R,a.size]])])]),n("label",lo,[no,n("div",so,[t(r,{modelValue:l.formInfoRoom.amountRoom,"onUpdate:modelValue":o[6]||(o[6]=e=>l.formInfoRoom.amountRoom=e),onChange:o[7]||(o[7]=e=>h("amountRoom"))},null,8,["modelValue"]),g(n("small",{class:"p-error text-custom-mini"},p(a.amountRoom),513),[[R,a.amountRoom]])])]),n("label",to,[ao,t(r,{modelValue:l.formInfoRoom.utilities,"onUpdate:modelValue":o[8]||(o[8]=e=>l.formInfoRoom.utilities=e)},null,8,["modelValue"])]),n("label",io,[mo,t(A,{modelValue:l.formInfoRoom.status,"onUpdate:modelValue":o[9]||(o[9]=e=>l.formInfoRoom.status=e),options:["Chưa cho thuê","Đã cho thuê"],placeholder:"Chọn trạng thái"},null,8,["modelValue"])])])]),_:1},8,["visible","header"]),n("div",ro,[uo,t(j,{value:v(f),selection:l.selectedRoom,"onUpdate:selection":o[14]||(o[14]=e=>l.selectedRoom=e),tableStyle:"min-width: 50rem",onRowDblclick:o[15]||(o[15]=e=>x(e))},{header:m(()=>[n("div",po,[n("div",co,[t(d,{label:"Thêm phòng",onClick:o[12]||(o[12]=e=>x("create"))}),t(d,{label:"Xóa phòng",class:"p-button-danger",onClick:U,disabled:!(l!=null&&l.selectedRoom[0])},null,8,["disabled"])]),n("div",null,[n("span",fo,[n("i",{class:"pi pi-search",onClick:b}),t(r,{modelValue:c.value,"onUpdate:modelValue":o[13]||(o[13]=e=>c.value=e),placeholder:"Tìm theo tên phòng",onKeypress:E(b,["enter"])},null,8,["modelValue","onKeypress"])])])])]),empty:m(()=>[Ro]),default:m(()=>[t(i,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(i,{field:"name",header:"Tên phòng",headerClass:"white-space-nowrap",class:"w-10rem"}),t(i,{field:"image",header:"Ảnh",headerClass:"white-space-nowrap",class:"w-10rem"},{body:m(({data:e})=>[n("img",{class:"w-7rem h-5rem object-fit-cover",src:e==null?void 0:e.image,alt:"Lỗi ảnh"},null,8,ho)]),_:1}),t(i,{field:"price",header:"Giá",headerClass:"white-space-nowrap",class:"w-10rem"},{body:m(({data:e})=>[n("span",null,p(v(q)(e==null?void 0:e.price)),1)]),_:1}),t(i,{field:"size",header:"Kích thước",headerClass:"white-space-nowrap",class:"w-10rem"}),t(i,{field:"amountRoom",header:"Số lượng phòng",headerClass:"white-space-nowrap",class:"w-10rem"}),t(i,{field:"utilities",header:"Các tiện ích",headerClass:"white-space-nowrap",class:"w-15rem"},{body:m(({data:e})=>[n("span",go,p(e==null?void 0:e.utilities),1)]),_:1}),t(i,{field:"status",header:"Trạng thái",headerClass:"white-space-nowrap",class:"w-10rem"})]),_:1},8,["value","selection"])])],64)}}};export{Co as default};
