import{S as K,r as C,h as V,i as I,j as L,a as u,o as $,c as O,d as t,k as m,b as n,F as E,e as _,v as w,t as p,w as M,l as q}from"./index-e6eb36cf.js";import{f as F}from"./index-2c23f115.js";import{T as X}from"./toast-754f1d1d.js";const P={class:"flex flex-column gap-3"},Q={class:"flex flex-column gap-2"},H=n("span",null,"Tên phòng:",-1),J={class:"flex flex-column gap-2"},W=n("span",null,"Ảnh phòng:",-1),Y={class:"flex flex-column gap-2"},Z=n("span",null,"Giá phòng:",-1),oo={class:"flex flex-column gap-1"},eo={class:"flex flex-column gap-2"},lo=n("span",null,"Kích thước phòng (m2):",-1),no={class:"flex flex-column gap-1"},so={class:"flex flex-column gap-2"},to=n("span",null,"Số lượng phòng:",-1),ao={class:"flex flex-column gap-1"},io={class:"flex flex-column gap-2"},mo=n("span",null,"Tiện ích:",-1),ro={class:"flex flex-column gap-2"},uo=n("span",null,"Trạng thái:",-1),po={class:"flex flex-column gap-3"},co=n("span",{class:"font-bold text-2xl"},"Quản lý phòng trọ",-1),fo={class:"flex justify-content-between"},ho={class:"flex gap-2"},go={class:"p-input-icon-right"},Ro=["src"],_o={class:"fixed-text"},wo=n("div",{class:"flex justify-content-center"}," Không tìm thấy kết quả nào ",-1),Vo={__name:"RoomManagement",setup(xo){const x=X(),{onActionAddInfoRoom:y,onActionUpdateInfoRoom:T,onActionGetRooms:h,onActionGetDetailRoom:D,onActionRemoveRoom:k,onGetterRooms:g,onGetterDetailRoom:S}=K(),l=C({formInfoRoom:{name:"",image:"",price:null,size:null,amountRoom:null,utilities:"",status:"Chưa cho thuê"},selectedRoom:[],display:!1,popupDetail:{title:"Thêm phòng trọ"}}),c=V(""),d=V([]),a=C({price:null,size:null,amountRoom:null}),b=s=>{var o;l.display=!0,s==="create"?(l.popupDetail.title="Thêm phòng trọ",l.formInfoRoom={name:"",image:"",price:null,size:null,amountRoom:null,utilities:"",status:"Chưa cho thuê"}):(l.popupDetail.title="Cập nhật thông tin phòng",D((o=s==null?void 0:s.data)==null?void 0:o.id))},R=s=>{isNaN(l.formInfoRoom[s])?a[s]="Trường này bắt buộc là số":a[s]=null},U=()=>{let s=!1;return Object.keys(a).forEach(o=>{a[o]&&(s=!0)}),s},z=async()=>{U()||(l.popupDetail.title==="Thêm phòng trọ"?await y(l.formInfoRoom):await T(l.formInfoRoom),x.success("Lưu dữ liệu phòng thành công!"),l.display=!1,h())},A=async()=>{for(const s of l.selectedRoom)await k(s.id);x.success("Xóa phòng thành công!"),h()},N=()=>{let s=!1;return Object.keys(l.formInfoRoom).forEach(o=>{l.formInfoRoom[o]||(s=!0)}),s},v=()=>{c.value?d.value=g.value.filter(s=>s==null?void 0:s.name.toLowerCase().includes(c.value.toLowerCase())):d.value=g.value};return I(S,s=>{l.formInfoRoom=s}),I(g,s=>{d.value=s}),L(()=>{h()}),(s,o)=>{const r=u("InputText"),j=u("Dropdown"),f=u("Button"),B=u("Dialog"),i=u("Column"),G=u("DataTable");return $(),O(E,null,[t(B,{visible:l.display,"onUpdate:visible":o[11]||(o[11]=e=>l.display=e),modal:"",header:l.popupDetail.title,class:"w-30rem"},{footer:m(()=>[t(f,{label:"Bỏ qua",onClick:o[10]||(o[10]=e=>l.display=!1),class:"p-button-outlined"}),t(f,{label:"Lưu",onClick:z,disabled:N(),autofocus:""},null,8,["disabled"])]),default:m(()=>[n("div",P,[n("label",Q,[H,t(r,{modelValue:l.formInfoRoom.name,"onUpdate:modelValue":o[0]||(o[0]=e=>l.formInfoRoom.name=e)},null,8,["modelValue"])]),n("label",J,[W,t(r,{modelValue:l.formInfoRoom.image,"onUpdate:modelValue":o[1]||(o[1]=e=>l.formInfoRoom.image=e)},null,8,["modelValue"])]),n("label",Y,[Z,n("div",oo,[t(r,{modelValue:l.formInfoRoom.price,"onUpdate:modelValue":o[2]||(o[2]=e=>l.formInfoRoom.price=e),onChange:o[3]||(o[3]=e=>R("price"))},null,8,["modelValue"]),_(n("small",{class:"p-error text-custom-mini"},p(a.price),513),[[w,a.price]])])]),n("label",eo,[lo,n("div",no,[t(r,{modelValue:l.formInfoRoom.size,"onUpdate:modelValue":o[4]||(o[4]=e=>l.formInfoRoom.size=e),onChange:o[5]||(o[5]=e=>R("size"))},null,8,["modelValue"]),_(n("small",{class:"p-error text-custom-mini"},p(a.size),513),[[w,a.size]])])]),n("label",so,[to,n("div",ao,[t(r,{modelValue:l.formInfoRoom.amountRoom,"onUpdate:modelValue":o[6]||(o[6]=e=>l.formInfoRoom.amountRoom=e),onChange:o[7]||(o[7]=e=>R("amountRoom"))},null,8,["modelValue"]),_(n("small",{class:"p-error text-custom-mini"},p(a.amountRoom),513),[[w,a.amountRoom]])])]),n("label",io,[mo,t(r,{modelValue:l.formInfoRoom.utilities,"onUpdate:modelValue":o[8]||(o[8]=e=>l.formInfoRoom.utilities=e)},null,8,["modelValue"])]),n("label",ro,[uo,t(j,{modelValue:l.formInfoRoom.status,"onUpdate:modelValue":o[9]||(o[9]=e=>l.formInfoRoom.status=e),options:["Chưa cho thuê","Đã cho thuê"],placeholder:"Chọn trạng thái"},null,8,["modelValue"])])])]),_:1},8,["visible","header"]),n("div",po,[co,t(G,{value:d.value,selection:l.selectedRoom,"onUpdate:selection":o[14]||(o[14]=e=>l.selectedRoom=e),tableStyle:"min-width: 50rem",onRowDblclick:o[15]||(o[15]=e=>b(e))},{header:m(()=>[n("div",fo,[n("div",ho,[t(f,{label:"Thêm phòng",onClick:o[12]||(o[12]=e=>b("create"))}),t(f,{label:"Xóa phòng",class:"p-button-danger",onClick:A,disabled:!(l!=null&&l.selectedRoom[0])},null,8,["disabled"])]),n("div",null,[n("span",go,[n("i",{class:"pi pi-search",onClick:v}),t(r,{modelValue:c.value,"onUpdate:modelValue":o[13]||(o[13]=e=>c.value=e),placeholder:"Tìm theo tên phòng",onKeypress:M(v,["enter"])},null,8,["modelValue","onKeypress"])])])])]),empty:m(()=>[wo]),default:m(()=>[t(i,{selectionMode:"multiple",headerStyle:"width: 3rem"}),t(i,{field:"name",header:"Tên phòng",headerClass:"white-space-nowrap",class:"w-10rem"}),t(i,{field:"image",header:"Ảnh",headerClass:"white-space-nowrap",class:"w-10rem"},{body:m(({data:e})=>[n("img",{class:"w-7rem h-5rem object-fit-cover",src:e==null?void 0:e.image,alt:"Lỗi ảnh"},null,8,Ro)]),_:1}),t(i,{field:"price",header:"Giá",headerClass:"white-space-nowrap",class:"w-10rem"},{body:m(({data:e})=>[n("span",null,p(q(F)(e==null?void 0:e.price)),1)]),_:1}),t(i,{field:"size",header:"Kích thước",headerClass:"white-space-nowrap",class:"w-10rem"}),t(i,{field:"amountRoom",header:"Số lượng phòng",headerClass:"white-space-nowrap",class:"w-10rem"}),t(i,{field:"utilities",header:"Các tiện ích",headerClass:"white-space-nowrap",class:"w-15rem"},{body:m(({data:e})=>[n("span",_o,p(e==null?void 0:e.utilities),1)]),_:1}),t(i,{field:"status",header:"Trạng thái",headerClass:"white-space-nowrap",class:"w-10rem"})]),_:1},8,["value","selection"])])],64)}}};export{Vo as default};
